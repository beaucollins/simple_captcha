Copyright (c) 2007 [Sur http://expressica.com]

SimpleCaptcha
=========================================================================================
  Version:  1.2.0
  Author:  Sur [http://expressica.com]
  Plugin Homepage: http://expressica.com/simple_captcha
  Contributors:  http://vinsol.com/team 
  License:  MIT  

  Introduction:
  -------------
  SimpleCaptcha is the simplest and a robust captcha plugin. Its implementation requires 
  adding up a single line in views and in controllers/models.
  SimpleCaptcha is available to be used with Rails2.0 or above and also it provides the 
  backward compatibility with previous versions of Rails.

  Major Changes:
  --------------
  Major changes in the plugin's logic and implementation have been incorporated with this 
  release...
  1) RMagick has been removed from the plugin. Moreover the logic to render the random
  images has been restructured from the scratch and it will not require any Image Processing
  library.
  2) FileSystem will no more be used by any means for the captcha functionality. Neither for
  storing the secret code nor for the images... as secret code storage has been moved to
  from filesystem to database storage and random image generation logic has been reqtructured
  to not to produce any image on filesystem.
  
  Advantages:
  -----------
  1) Zero dependency on Image processing library(RMagick is removed).
  2) Zero FileSystem usage(secret code moved to db-store and image generation removed).
  3) Robust and non-hackable captcha.
  4) Works absolutely fine in distributed environment(session and db based implementation works 
    fine in distributed environment).
  5) No hassles for handling the public/images/simple_captcha directory for capistrano
    (no image generation, hence no extra directory is needed in public/images).
  6) Implementation is as easy as just writing a single line in your view...
    "<%= show_simple_captcha %>" within the <form> tags.
  7) Flexible DOM and CSS handling(There is a separate view partial for rednering SimpleCaptcha 
    DOM elements).

Installation
=========================================================================================
  (head revision with svn)
  SVN checkout the plugin as
  svn co svn://rubyforge.org/var/svn/expressica/plugins/simple_captcha simple_captcha
  Now put the directory simple_captcha in your application as /vendor/plugins/simple_captcha

  OR

  (head revision without svn)
  SimpleCaptcha plugin can be installed by running this command from the application root
  
  >> ruby script/plugin install svn://rubyforge.org/var/svn/expressica/plugins/simple_captcha


Setup
=========================================================================================
  After installation, follow these simple steps to setup the plugin. The setup will depend
  on the version of rails your application is using.
  
  for rails >= 2.0
  ---------------
  >> rake simple_captcha:setup
  >> rake db:migrate
  
  for rails < 2.0
  ---------------
  >> rake simple_captcha:setup_old
  >> rake db:migrate


Usage
=========================================================================================

  Controller Based
  =======================================================================================
    In the view file within the form tags add this code
    
    <%= show_simple_captcha %>
    
    and in the controller's action authenticate it as 
    
      if simple_captcha_valid?
        do this
      else
        do that
      end


  Model Based
  =======================================================================================
    In the view file within the form tags write this code

    <%= show_simple_captcha(:object=>"user") %>

    and in the model class add this code

    class User < ActiveRecord::Basse
      apply_simple_captcha
    end

    Validating with captcha
    ---------------------------------------------------------------------------------------
      @user.valid_with_captcha?
      NOTE: @user.valid? will still work as it should, it will not validate the captcha code.

    Saving with captcha
    ---------------------------------------------------------------------------------------
      @user.save_with_captcha
      NOTE: @user.save will still work as it should, it will not validate the captcha code.

Options & Examples
===========================================================================================

  View Options
  =========================================================================================
  
    :label
    ---------------------------------------------------------------------------------------
      provides the custom text b/w the image and the text field,
      the default is "type the text from the image"

    :image_style
    ---------------------------------------------------------------------------------------
      provides the specific image style for the captcha image.
      By default it uses the style provided by the plugin. Contrary to the version-1.0,
      SimpleCaptcha now provides only one image style which is default. Though you can
      have any number of styles as per your need... its much flexible and customizable now.
      
      How to add more image styles ?
      ------------------------------
      You can create a set of JPEG alphabetical images using any photo editor with any 
      style you want, preferably of size 15x20px(otherwise SimpleCaptcha CSS will need to be 
      changed). Just name the images as A.jpg, B.jpg...Z.jpg (please mind the format "A.jpg",
       A-upcase; jpg-downcase) put them in a folder, name the folder what you want the name 
      of style e.g. "flashy_image". 
      Now put this folder "flashy_image" in the plugin's assets directory as...
      "vendor/plugins/simple_captcha/assets/images/simple_captcha/flashy_image". Now you can
      use this style in the method call in the view as...
      <%= show_simple_captcha(:image_style => "flashy_image") %>.
      
      WARNING: 
      --------
      All the images of the alphabetical-image-set you will create, should be 
      identical wrt. all the file attributes. No file should hold any unique value of any file
      attribute viz. disk_size, image_size(width, height), ctime, mtime or so...
      If you notice the default images provided by the plugin are exactly identical with
      850bytes in volume, 15x20px in size and all have the same ctime, mtime attributes.
      If you are unable to make the images with these constraints, it is highly recommended
      that you should use the default style only. If any of these attributes are unique,
      it might make your captcha hackable. 
      The default set of images is ROBUST and NON-HACKABLE by all means.
      
      How to change the CSS for SimpleCaptcha DOM elements ?
      -----------------------------------------------------
      You can change the CSS of the SimpleCaptcha DOM elements as per your need in this file...
      For Rails >= 2.0 the file wiil reside as...
      "/vendor/plugins/simple_captcha/assets/views/simple_captcha/_simple_captcha.erb"
      For Rails < 2.0 the file will reside as...
      "/app/views/simple_captcha/_simple_captcha.rhtml"
    
    :object
    ---------------------------------------------------------------------------------------
      the name of the object of the model class, to implement the model based captcha.
    
  Examples
  =========================================================================================
  
    Controller Based Example
    ---------------------------------------------------------------------------------------
      <%= show_simple_captcha(:label => "human authentication") %>
    
    Model Based Example
    ---------------------------------------------------------------------------------------
      <%= show_simple_captcha(:object => 'user', :label => "human authentication") %>



  Model Options
  =========================================================================================

    :message
    ---------------------------------------------------------------------------------------
      provides the custom message on failure of captcha authentication
      the default is "image did not match with text"

    Model's Example
    ---------------------------------------------------------------------------------------
      class User < ActiveRecord::Base
        apply_simple_captcha :message => " image and text were different"
      end


===========================================================================================

  ALL DONE! Enjoy the simplest captcha plugin.
  Author: Sur
  Blog: http://expressica.com
  Contact: sur.max@gmail.com
  Plugin Homepage: http://expressica.com/simple_captcha

  Any feedback/comment/issue/donation is welcome!

===========================================================================================
